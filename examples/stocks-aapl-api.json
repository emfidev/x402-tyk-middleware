{
  "name": "Stocks AAPL API - x402 Protected",
  "slug": "stocks-aapl-x402",
  "api_id": "stocks-aapl-x402",
  "org_id": "default",
  "enable_real_ip_from_header": true,
  "use_keyless": true,
  "auth": {
    "auth_header_name": ""
  },
  "definition": {
    "location": "header",
    "key": "x-api-version"
  },
  "version_data": {
    "not_versioned": true,
    "versions": {
      "Default": {
        "name": "Default"
      }
    }
  },
  "proxy": {
    "listen_path": "/stocks/daily/AAPL",
    "strip_listen_path": true,
    "target_url": "https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=AAPL&apikey=demo"
  },
  "custom_middleware": {
    "driver": "otto",
    "pre": [
      {
        "name": "x402_payment",
        "path": "/opt/tyk-gateway/middleware/x402_payment.js",
        "require_session": false,
        "raw_body_only": true
      }
    ],
    "post": [
      {
        "name": "x402_payment",
        "path": "/opt/tyk-gateway/middleware/x402_payment.js",
        "require_session": false
      }
    ]
  },
  "config_data": {
    "paths": {
      "/stocks/daily/AAPL": {
        "get": {
          "x402": {
            "network": "solana-devnet",
            "scheme": "exact",
            "payTo": "4ALzeixKQvVwVX65g9Rk9n7WPBRoMwgwymFXh5EiFpU8",
            "feePayer": "4ALzeixKQvVwVX65g9Rk9n7WPBRoMwgwymFXh5EiFpU8",
            "asset": "4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU",
            "maxAmountRequired": "200",
            "description": "Apple Inc. (AAPL) daily stock data"
          }
        }
      }
    }
  },
  "active": true,
  "CORS": {
    "enable": true,
    "allowed_origins": ["*"],
    "allowed_methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
    "allowed_headers": ["*"],
    "exposed_headers": ["X-Payment-Valid", "X-Payment-Tx", "X-Payment-Network"],
    "allow_credentials": false
  }
}
